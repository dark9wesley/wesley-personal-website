:root {
  /* 使用我们网站的颜色变量 */
  --fg-color: var(--foreground) !important;
  --fg-color-0: rgba(var(--foreground), 0.09);
  --fg-color-1: rgba(var(--foreground), 0.16);
  --fg-color-2: rgba(var(--foreground), 0.4);
  --fg-color-3: rgba(var(--foreground), 0.6);
  --fg-color-4: var(--foreground);
  --fg-color-5: rgba(var(--foreground), 0.024);
  --fg-color-6: rgba(var(--foreground), 0.8);
  --fg-color-icon: var(--foreground);

  --bg-color: var(--background);
  --bg-color-0: var(--muted);
  --bg-color-1: var(--muted);
  --bg-color-2: var(--muted);

  /* 使用我们网站的强调色 */
  --select-color-0: var(--highlight);
  --select-color-1: rgba(var(--highlight), 0.3);
  --select-color-2: var(--foreground);

  /* Notion 颜色保持不变 */
  --notion-red: rgb(224, 62, 62);
  --notion-pink: rgb(173, 26, 114);
  --notion-blue: rgb(11, 110, 153);
  --notion-purple: rgb(105, 64, 165);
  --notion-teal: rgb(15, 123, 108);
  --notion-yellow: rgb(223, 171, 1);
  --notion-orange: rgb(217, 115, 13);
  --notion-brown: rgb(100, 71, 58);
  --notion-gray: rgb(155, 154, 151);

  --notion-red_background: rgb(251, 228, 228);
  --notion-pink_background: rgb(244, 223, 235);
  --notion-blue_background: rgb(221, 235, 241);
  --notion-purple_background: rgb(234, 228, 242);
  --notion-teal_background: rgb(221, 237, 234);
  --notion-yellow_background: rgb(251, 243, 219);
  --notion-orange_background: rgb(250, 235, 221);
  --notion-brown_background: rgb(233, 229, 227);
  --notion-gray_background: rgb(241, 241, 239);
  --notion-green_background: rgb(219, 237, 219);
  --notion-default_background: rgba(227, 226, 224);

  --notion-red_background_co: rgba(251, 228, 228, 0.3);
  --notion-pink_background_co: rgba(244, 223, 235, 0.3);
  --notion-blue_background_co: rgba(221, 235, 241, 0.3);
  --notion-purple_background_co: rgba(234, 228, 242, 0.3);
  --notion-teal_background_co: rgba(221, 237, 234, 0.3);
  --notion-yellow_background_co: rgba(251, 243, 219, 0.3);
  --notion-orange_background_co: rgba(250, 235, 221, 0.3);
  --notion-brown_background_co: rgba(233, 229, 227, 0.3);
  --notion-gray_background_co: rgba(241, 241, 239, 0.3);
  --notion-green_background_co: rgba(219, 237, 219, 0.3);
  --notion-default_background_co: rgba(227, 226, 224, 0.3);

  --notion-item-blue: rgba(0, 120, 223, 0.2);
  --notion-item-orange: rgba(245, 93, 0, 0.2);
  --notion-item-green: rgba(0, 135, 107, 0.2);
  --notion-item-pink: rgba(221, 0, 129, 0.2);
  --notion-item-brown: rgba(140, 46, 0, 0.2);
  --notion-item-red: rgba(255, 0, 26, 0.2);
  --notion-item-yellow: rgba(233, 168, 0, 0.2);
  --notion-item-default: rgba(206, 205, 202, 0.5);
  --notion-item-purple: rgba(103, 36, 222, 0.2);
  --notion-item-gray: rgba(155, 154, 151, 0.4);

  /* 调整最大宽度以匹配我们的设计 */
  --notion-max-width: 100%;
  --notion-header-height: 45px;
}

/* 基本样式 */
.notion {
  font-size: 16px;
  line-height: 1.6;
  color: var(--foreground);
  caret-color: var(--foreground);
  font-family: inherit !important;
}

.notion > * {
  padding: 3px 0;
}

.notion * {
  margin-block-start: 0;
  margin-block-end: 0;
}

.notion *::selection {
  background: var(--select-color-1);
}

.notion *,
.notion *:focus {
  outline: 0;
}

/* 页面内容布局 */
.notion-page-content {
  width: 100%;
  display: flex;
  flex-direction: column;
}

.notion-page-content-inner {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

/* 侧边栏 */
.notion-aside {
  position: sticky;
  top: calc(88px);
  align-self: flex-start;
  flex: 1;
  flex-direction: column;
  align-items: center;
}

.notion-aside-table-of-contents {
  display: flex;
  flex-direction: column;
  align-items: center;
  max-height: calc(100vh - 148px - 16px);
  overflow: hidden auto;
  min-width: 222px;
  overflow: auto;
}

.notion-aside-table-of-contents-header {
  text-transform: uppercase;
  font-weight: 500;
  font-size: 1.1em;
  word-break: break-word;
}

/* 目录样式 */
.notion-table-of-contents {
  width: 100%;
  margin: 4px 0;
  @apply bg-muted/50 dark:bg-muted p-4 rounded-md my-6;
}

.notion-table-of-contents-item {
  text-decoration: none;
  user-select: none;
  transition: background 120ms ease-in 0s;
  cursor: pointer;
  width: 100%;
  opacity: 0.9;
  padding: 6px 2px;
  font-size: 15px;
  line-height: 1.3;
  display: flex;
  align-items: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  @apply text-foreground dark:text-foreground;
}

.notion-table-of-contents-item:hover {
  @apply bg-muted/70 dark:bg-muted/70;
}

.notion-table-of-contents-item-body {
  @apply border-b border-border;
}

.notion-table-of-contents-active-item {
  @apply text-highlight dark:text-highlight font-medium !important;
}

/* 标题样式 */
.notion-h {
  position: relative;
  font-weight: 600;
  line-height: 1.3;
  padding: 3px 2px;
  margin-bottom: 1px;
  max-width: 100%;
  white-space: pre-wrap;
  word-break: break-word;
}

.notion-h1 {
  font-size: 1.875em;
  margin-top: 1.4em;
  margin-bottom: 0.5em;
  @apply w-full font-bold;
}

.notion-h2 {
  font-size: 1.5em;
  margin-top: 1.1em;
  margin-bottom: 0.4em;
  @apply w-full font-semibold;
}

.notion-h3 {
  font-size: 1.25em;
  margin-top: 1em;
  margin-bottom: 0.3em;
  @apply w-full font-medium;
}

.notion-title {
  width: 100%;
  font-size: 2.5em;
  font-weight: 700;
  margin-bottom: 20px;
  line-height: 1.2;
  @apply hidden; /* 隐藏 Notion 标题，因为我们已经在页面顶部显示了标题 */
}

/* 链接样式 */
.notion-link {
  color: inherit;
  word-break: break-word;
  text-decoration: inherit;
  border-bottom: 0.05em solid !important;
  @apply border-highlight/50 text-highlight transition-all;
}

.notion-link:hover {
  @apply border-highlight text-highlight/90;
}

/* 引用块样式 */
.notion-quote {
  display: block;
  width: 100%;
  white-space: pre-wrap;
  word-break: break-word;
  @apply border-l-4 border-highlight/70 pl-4 py-2 my-6 italic;
}

/* 分隔线样式 */
.notion-hr {
  width: 100%;
  margin: 1.5rem 0;
  padding: 0;
  @apply border-t border-border dark:border-border;
}

/* 代码块样式 */
.notion-code {
  padding: 30px 16px 30px 20px;
  margin: 1.5rem 0;
  @apply rounded-md bg-muted dark:bg-black w-full overflow-auto font-mono text-sm;
}

.notion-inline-code {
  @apply text-red-500 dark:text-red-400 bg-muted/50 dark:bg-muted/30 px-1.5 py-0.5 rounded text-sm font-mono;
}

/* 列表样式 */
.notion-list {
  margin: 0;
  margin-block-start: 0.6em;
  margin-block-end: 0.6em;
  @apply w-full;
}

.notion-list-disc {
  list-style-type: disc;
  padding-inline-start: 1.4em;
  margin-top: 0;
  margin-bottom: 0;
}

.notion-list-numbered {
  list-style-type: decimal;
  padding-inline-start: 1.6em;
  margin-top: 0;
  margin-bottom: 0;
}

.notion-list li {
  padding: 3px 0;
  white-space: pre-wrap;
}

/* 图片样式 */
.notion-asset-wrapper {
  margin: 1rem 0;
  max-width: 100%;
  min-width: 100%;
  align-self: center;
  display: flex;
  flex-direction: column;
}

.notion-asset-wrapper img {
  height: auto !important;
  max-height: 100%;
  margin: auto;
  @apply rounded-md;
}

.notion-asset-caption {
  padding: 6px 0 6px 2px;
  white-space: pre-wrap;
  word-break: break-word;
  caret-color: var(--fg-color);
  font-size: 14px;
  line-height: 1.4;
  @apply text-center text-muted-foreground dark:text-muted-foreground mt-2;
}

/* 提示框样式 */
.notion-callout {
  padding: 16px 16px 16px 12px;
  display: inline-flex;
  width: 100%;
  @apply rounded-md border border-border bg-muted/30 dark:bg-muted/10 my-4 items-center;
}

.notion-callout .notion-page-icon {
  align-self: flex-start;
  width: 24px;
  height: 24px;
  font-size: 1em;
  line-height: 1em;
}

.notion-callout-text {
  margin-left: 8px;
  white-space: pre-wrap;
  word-break: break-word;
  overflow: hidden;
}

.notion-callout-text .notion-text {
  padding: 0px 0px !important;
  margin: 0px 0px !important;
  line-height: normal !important;
}

/* 折叠块样式 */
.notion-toggle {
  padding: 3px 2px;
  width: 100%;
}

.notion-toggle > summary {
  cursor: pointer;
  outline: none;
}

.notion-toggle > div {
  margin-left: 1.1em;
}

/* 书签样式 */
.notion-bookmark {
  margin: 4px 0;
  width: 100%;
  box-sizing: border-box;
  text-decoration: none;
  @apply border border-border rounded-md overflow-hidden transition-all;
}

.notion-bookmark:hover {
  @apply border-highlight/50;
}

.notion-bookmark > div:first-child {
  flex: 4 1 180px;
  padding: 12px 14px 14px;
  overflow: hidden;
  text-align: left;
  @apply text-foreground;
}

.notion-bookmark-title {
  font-size: 14px;
  line-height: 20px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-height: 24px;
  margin-bottom: 2px;
  font-weight: 500;
}

.notion-bookmark-description {
  font-size: 12px;
  line-height: 16px;
  height: 32px;
  overflow: hidden;
  @apply text-muted-foreground;
}

.notion-bookmark-link {
  display: flex;
  margin-top: 6px;
}

.notion-bookmark-link > img {
  width: 16px;
  height: 16px;
  min-width: 16px;
  margin-right: 6px;
}

.notion-bookmark-link > div {
  font-size: 12px;
  line-height: 16px;
  @apply text-muted-foreground;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.notion-bookmark-image {
  flex: 1 1 180px;
  position: relative;
}

.notion-bookmark-image img {
  object-fit: cover;
  width: 100%;
  height: 100%;
  position: absolute;
}

/* 表格样式 */
.notion-simple-table {
  @apply w-full overflow-x-auto block border-collapse my-4;
}

.notion-simple-table tr:first-child td {
  @apply bg-muted/50 dark:bg-muted/30 text-center font-medium;
}

.notion-simple-table td {
  @apply border border-border p-2;
}

/* 文本样式 */
.notion-text {
  width: 100%;
  white-space: pre-wrap;
  word-break: break-word;
  @apply my-3 leading-7;
}

/* 暗模式适配 */
.dark .notion {
  @apply text-foreground;
}

.dark .notion-code {
  @apply bg-black;
}

.dark .notion-table-header {
  @apply bg-muted/70;
}

.dark .notion-table-of-contents {
  @apply bg-muted/30;
}

/* 响应式调整 */
@media only screen and (max-width: 730px) {
  .notion-page {
    padding-left: 0;
    padding-right: 0;
  }

  .notion-asset-wrapper {
    max-width: 100%;
  }
}

@media (max-width: 640px) {
  .notion-bookmark-image {
    display: none;
  }
}

/* 修复视频尺寸问题 */
figure.notion-asset-wrapper.notion-asset-wrapper-video > div {
  height: 100% !important;
  width: 100% !important;
}

/* 修复 PDF 预览 */
.notion-asset-wrapper-pdf > div {
  display: block !important;
}

.react-pdf__Page__canvas,
.react-pdf__Page__textContent {
  width: 100% !important;
  height: auto !important;
}

/* 隐藏代码复制按钮 */
.notion-code-copy {
  display: none;
}

/* Mermaid 图表样式 */
pre[class*="language-mermaid"] {
  @apply bg-muted/50 dark:bg-muted/30 !important;
}

code.language-mermaid {
  display: none;
}

.mermaid > svg {
  margin: auto;
}

/* 数学公式样式 */
.notion-equation-inline .katex-display {
  margin: 0 0 !important;
}

.notion-collection-page-properties {
  display: none !important;
}
